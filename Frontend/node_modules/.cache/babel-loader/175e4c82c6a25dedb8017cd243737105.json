{"ast":null,"code":"import { USER_LOGIN_SUCCESS, USER_LOGOUT } from './actions/users';\nimport { localStorageJwtKey } from './constants';\nexport const storeJwt = store => next => action => {\n  try {\n    if (action.type === USER_LOGIN_SUCCESS) {\n      localStorage.setItem(localStorageJwtKey, action.payload.jwt);\n    }\n\n    if (action.type === USER_LOGOUT) {\n      localStorage.removeItem(localStorageJwtKey);\n    }\n  } catch (e) {\n    console.log(\"Interaction with LocalStorage went wrong\", e);\n  }\n\n  next(action);\n};\nexport const socketIo = socketio => store => next => action => {\n  if (action.type === USER_LOGIN_SUCCESS) {\n    const jwt = action.payload.jwt;\n    socketio.connect(store.dispatch, jwt);\n  }\n\n  if (action.type === USER_LOGOUT) {\n    socketio.disconnect();\n  }\n\n  next(action);\n};","map":{"version":3,"sources":["/Users/robertlangereis/Google Drive/solo-projects/nuffcoffee-web/Frontend/src/middleware.js"],"names":["USER_LOGIN_SUCCESS","USER_LOGOUT","localStorageJwtKey","storeJwt","store","next","action","type","localStorage","setItem","payload","jwt","removeItem","e","console","log","socketIo","socketio","connect","dispatch","disconnect"],"mappings":"AAAA,SAAQA,kBAAR,EAA4BC,WAA5B,QAA8C,iBAA9C;AACA,SAAQC,kBAAR,QAAiC,aAAjC;AAEA,OAAO,MAAMC,QAAQ,GAAGC,KAAK,IAAIC,IAAI,IAAIC,MAAM,IAAI;AACjD,MAAI;AACF,QAAIA,MAAM,CAACC,IAAP,KAAgBP,kBAApB,EAAwC;AACtCQ,MAAAA,YAAY,CAACC,OAAb,CAAqBP,kBAArB,EAAyCI,MAAM,CAACI,OAAP,CAAeC,GAAxD;AACD;;AACD,QAAIL,MAAM,CAACC,IAAP,KAAgBN,WAApB,EAAiC;AAC/BO,MAAAA,YAAY,CAACI,UAAb,CAAwBV,kBAAxB;AACD;AACF,GAPD,CAQA,OAAOW,CAAP,EAAU;AACRC,IAAAA,OAAO,CAACC,GAAR,6CAAwDF,CAAxD;AACD;;AAEDR,EAAAA,IAAI,CAACC,MAAD,CAAJ;AACD,CAdM;AAgBP,OAAO,MAAMU,QAAQ,GAAGC,QAAQ,IAAIb,KAAK,IAAIC,IAAI,IAAIC,MAAM,IAAI;AAC7D,MAAIA,MAAM,CAACC,IAAP,KAAgBP,kBAApB,EAAwC;AACtC,UAAMW,GAAG,GAAGL,MAAM,CAACI,OAAP,CAAeC,GAA3B;AACAM,IAAAA,QAAQ,CAACC,OAAT,CAAiBd,KAAK,CAACe,QAAvB,EAAiCR,GAAjC;AACD;;AACD,MAAIL,MAAM,CAACC,IAAP,KAAgBN,WAApB,EAAiC;AAC/BgB,IAAAA,QAAQ,CAACG,UAAT;AACD;;AAEDf,EAAAA,IAAI,CAACC,MAAD,CAAJ;AACD,CAVM","sourcesContent":["import {USER_LOGIN_SUCCESS, USER_LOGOUT} from './actions/users'\nimport {localStorageJwtKey} from './constants'\n\nexport const storeJwt = store => next => action => {\n  try {\n    if (action.type === USER_LOGIN_SUCCESS) {\n      localStorage.setItem(localStorageJwtKey, action.payload.jwt)\n    }\n    if (action.type === USER_LOGOUT) {\n      localStorage.removeItem(localStorageJwtKey)\n    }\n  }\n  catch (e) {\n    console.log(`Interaction with LocalStorage went wrong`, e)\n  }\n\n  next(action)\n}\n\nexport const socketIo = socketio => store => next => action => {\n  if (action.type === USER_LOGIN_SUCCESS) {\n    const jwt = action.payload.jwt\n    socketio.connect(store.dispatch, jwt)\n  }\n  if (action.type === USER_LOGOUT) {\n    socketio.disconnect()\n  }\n\n  next(action)\n}\n"]},"metadata":{},"sourceType":"module"}